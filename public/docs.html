<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>Social Map Backend Document</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<style>
			body {
				background-image: url('bg.jpg');
				background-repeat: no-repeat;
				background-size: cover;
				background-attachment: fixed;
			}
			.jumbotron, .panel, pre {
				background-color: rgba(255, 255, 255, 0.7);
			}
		</style>
	</head>
	<body>
		<div class="container jumbotron">
			<h2>Social Map APIs</h2>
			<div class="panel panel-primary">
			  <div class="panel-heading">
			    <div class="panel-title">Defination</div>
			  </div>
			  <div class="panel-body">

				  	All notice/warning will be put on the <mark>highlight</mark> block
				  	<br />
				  	All code/command will be put on the <code>code</code> block
				  	<br /><br />
				  	<quote>
					  	<b>Required extensions:</b>
					  	<ul>
					  		<li>NodeJS</li>
					  		<li>HapiJS</li>
					  		<li>Mongoose</li>
					  		<li>Joi</li>
					  		<li>Mocha for Testing</li>
					  		<li>Superagent for Testing</li>
					  		<li>ExpectJs for testing</li>
					  		<li><b>Grunt</b> for automated task</li>
					  		<li>Grunt-ssh</li>
					  		<li>Forever (optional) to keep a child process running continuously and automatically restart</li>
					  		<li>Bcrypt for password encryption</li>
					  		<li>Bell for Facebook Authentication</li>
					  	</ul>
				  	</quote>

			  </div>
			</div>

			<div class="panel panel-primary">
			  <div class="panel-heading">
			    <div class="panel-title">Server Commands</div>
			  </div>
			  <div class="panel-body">
			  	To start server: <code>npm start</code><br />
			  	To run automated test: <code>npm test</code><br />
			  </div>
			</div>

			<div class="panel panel-primary">
			  <div class="panel-heading">
			    <div class="panel-title">Deployment to Staging/Production</div>
			  </div>
			  <div class="panel-body">
			  	Staging: deploy to staging.skipfile.com <code>grunt deploy</code><br />
			  	Production: deploy to production.skipfile.com <code>grunt production</code><br />
			  	<mark>Production server will be available once the project is ready to deploy</mark>
			  </div>
			</div>

			<div class="panel panel-primary">
			  <div class="panel-heading">
			    <div class="panel-title">Local Authentication API</div>
			  </div>
			  <div class="panel-body">
			  	Register: <code>/register</code><br />
			  	If Succeed:<br />
			  	<pre>
{
  "message": "Register successful",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjU0MTAzZGQ2ODdkMzMzMjk4ZDU4OGY4MCIsImlhdCI6MTQxMDM1MDU1MCwiZXhwIjoxNDEwMzU0MTUwfQ.khZTJBKeLgw_AsMwswrvLSA1VD_SYCQNEtAfZYWRHFw"
}					</pre><br>
			  	If Error: Send error output<br /><br />
			  	Login: <code>/login</code><br />
			  	If Succeed:<br />
			  	<pre>
{
    "message": "Login successful",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjU0MTAzZGQ2ODdkMzMzMjk4ZDU4OGY4MCIsImlhdCI6MTQxMDM1MDU1MCwiZXhwIjoxNDEwMzU0MTUwfQ.khZTJBKeLgw_AsMwswrvLSA1VD_SYCQNEtAfZYWRHFw"
}			  	</pre><br />
			  	If Wrong Username/Password: <br />
			  	<pre>
{
    "message": "Wrong username or password"
}			  	</pre><br />
			  	Other Error: Display error logs<br />
			  	<mark>Turned username/email uniqueness off for easy testing</mark><br />
			  	<mark>Lack of wrong username case, adding soon</mark><br />
			  </div>
			</div>

			<div class="panel panel-primary">
			  <div class="panel-heading">
			    <div class="panel-title">OAuth Login API</div>
			  </div>
			  <div class="panel-body">
			  	Facebook <code>/login/facebook</code><br />
			  	Return JSON: <br />
			  	<pre>
{  
   "provider":"facebook",
   "token":"CAAFAT6vBCDEBANxrO0TBKHnHZCOJxHHFd9Yw92DMS8FYkvpkB9ZAmdoSNHsCDLAZBPaEXrq8zfJvIUvV74jiFUP3ykcTftY7uRJUTYEjrjtCjDL2eaIWYdhamZCDHZBBSwLFw3mHIgJrfWb8nNT1In8H2V9...",
   "query":{  

   },
   "profile":{  
      "id":"10203769782833915",
      "username":"phongmh307",
      "displayName":"Phong Mai",
      "name":{  
         "first":"Phong",
         "last":"Mai"
      },
      "email":"fuzzfoxvnc@gmail.com",
      "raw":{  
         "id":"10203769782833915",
         "email":"fuzzfoxvnc@gmail.com",
         "first_name":"Phong",
         "gender":"male",
         "last_name":"Mai",
         "link":"https://www.facebook.com/phongmh307",
         "locale":"en_US",
         "name":"Phong Mai",
         "timezone":7,
         "updated_time":"2014-04-12T15:52:30+0000",
         "username":"phongmh307",
         "verified":true
      }
   }
}					</pre><br />
					If New Account: <br />
					<pre>
{  
   "message":"New Account created",
   "token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjU0MTEzZmYyYzc2NzIxYTM0M2Q5OTc5NCIsImlhdCI6MTQxMDQxNjYyNiwiZXhwIjoxNDEwNDIwMjI2fQ.TFRgGo5OjOUGqNY9QAWhKsXCcNaYxKNW6SYKUOLuCs4"
}					</pre><br />
					If Account Existed: <br />
					<pre>
{  
   "message":"Account Existed",
   "token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjU0MTEzZmYyYzc2NzIxYTM0M2Q5OTc5NCIsImlhdCI6MTQxMDQxNjYyNiwiZXhwIjoxNDEwNDIwMjI2fQ.TFRgGo5OjOUGqNY9QAWhKsXCcNaYxKNW6SYKUOLuCs4"
}				</pre>
			  </div>
			</div>

			<div class="panel panel-warning">
			  <!-- Default panel contents -->
			  <div class="panel-heading"><div class="panel-title">Development Logs</div></div>

			  <!-- List group -->
			  <ul class="list-group">
			  	<li class="list-group-item">Adding facebook token-based authorization</li>
			  	<li class="list-group-item">Added local token-based authorization</li>
			  	<li class="list-group-item">Added test for authorization</li>
			    <li class="list-group-item">Adding automatic deployment at staging.skipfile.com</li>
			    <li class="list-group-item">Adding extensions</li>
			    <li class="list-group-item">Adding automated test for backend</li>
			    <li class="list-group-item">Backend Structure</li>
			    <li class="list-group-item">Retrieve map from iMap Service</li>
			  </ul>
			</div>
		</div>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	</body>
</html>